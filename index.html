<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SitNEat - Order Online</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Base styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* bg-slate-50 */
            display: flex;
        }
        /* Page transition helper */
        .page {
            display: none; /* Hide all pages by default */
        }
        /* Class to show the active page */
        .page.active {
            display: block;
        }
        /* Custom styles for quantity buttons */
        .qty-btn {
            /* Brand color: teal-600 */
            @apply w-8 h-8 rounded-full bg-teal-600 text-white text-lg font-bold flex items-center justify-center transition-transform duration-100 ease-in-out active:scale-90 shadow;
        }   
        .qty-btn-minus {
             /* Brand color outline */
             @apply w-8 h-8 rounded-full bg-white border border-teal-600 text-teal-600 text-lg font-bold flex items-center justify-center transition-transform duration-100 ease-in-out active:scale-90;
        }
        .add-btn {
            /* Brand color light */
            @apply px-4 py-1.5 rounded-lg bg-teal-50 text-teal-700 font-semibold border border-teal-600 transition-transform duration-100 ease-in-out active:scale-95 hover:bg-teal-100;
            padding: 4px;
            border-radius: 10px;
        }
        .add-btn:hover{
            background: rgb(5, 188, 5);
            color:white;
        }
        .div1{
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-gray-50">

    <!-- Main App Container (Simulates a mobile view) -->
    <div id="app" class="max-w-md mx-auto bg-white min-h-dvh shadow-xl relative pb-28">

        <!-- ===== Page 1: Menu Page ===== -->
        <div id="menu-page" class="page active">
            <!-- Header -->

            <header class=" p-5 flex items-center justify-between bg-teal-600 text-white sticky top-0 z-10  shadow-md">
                <div class="div">
                    <h1 class="text-3xl font-bold tracking-tight">SitNEat</h1>
                    <p class="text-teal-100 text-sm">Freshly prepared, just for you.</p>
                </div>
                <div class="div1" onclick="fnslert();">
                    Menu
                </div>
            </header>
            
            <!-- Menu Items Container -->
            <main id="menu-items-container" class="p-5 space-y-5 w-full">
                <!-- Menu items will be dynamically injected here by JS -->
            </main>

            <!-- Footer: Cart Summary Bar (Fixed) -->
            <footer id="cart-summary-bar" class="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white border-t-2 border-gray-200 shadow-inner">
                <div class="p-4 flex justify-between items-center">
                    <div>
                        <span id="cart-item-count" class="font-bold text-lg text-gray-800">0 Items</span>
                        <span class="text-gray-300 mx-2">|</span>
                        <span id="cart-total-price" class="font-bold text-lg text-gray-800">â‚¹0</span>
                    </div>
                    <button id="continue-btn" onclick="showPage('checkout')" class="px-6 py-3 rounded-lg bg-teal-600 hover:bg-teal-700 text-white font-semibold shadow-md transition-all duration-200 disabled:opacity-50 disabled:bg-gray-300 disabled:cursor-not-allowed" disabled>
                        Continue
                    </button>
                </div>
            </footer>
        </div>

        <!-- ===== Page 2: Checkout Page ===== -->
        <div id="checkout-page" class="page">
            <!-- Header -->
            <header class="p-4 border-b shadow-sm flex items-center space-x-3">
                <button onclick="showPage('menu')" class="text-teal-600 hover:text-teal-800 p-2 rounded-full hover:bg-gray-100">
                    <!-- Back Arrow SVG -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
                    </svg>
                </button>
                <h1 class="text-2xl font-bold text-gray-800">Review Your Order</h1>
            </header>

            <!-- Order Summary -->
            <main class="p-5">
                <div id="checkout-items-list" class="space-y-4">
                    <!-- Checkout items will be dynamically injected here by JS -->
                </div>

                <!-- Divider -->
                <hr class="my-5 border-dashed">

                <!-- Total Amount -->
                <div class="bg-teal-50 p-4 rounded-lg flex justify-between items-center mt-6">
                    <span class="text-lg font-bold text-teal-800">Total Amount</span>
                    <span id="checkout-total-price" class="text-2xl font-bold text-teal-900">â‚¹0</span>
                </div>

                <!-- Place Order Button -->
                <button onclick="placeOrder()" class="w-full mt-8 py-4 rounded-lg bg-teal-600 hover:bg-teal-700 text-white font-semibold text-lg shadow-md transition-all">
                    Place Order
                </button>
                <button onclick="showPage('menu')" class="w-full mt-8 py-4 rounded-lg bg-green-600 hover:bg-teal-700 text-white font-semibold text-lg shadow-md transition-all">
                    Order More
                </button>
            </main>
        </div>

        <!-- ===== Page 3: Success Page ===== -->
        <div id="success-page" class="page">
            <div class="flex flex-col items-center justify-center h-[90vh] p-6 text-center">
                <!-- Success Checkmark SVG -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-24 w-24 text-teal-600 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <h1 class="text-3xl font-bold text-gray-800 mb-2">Order Confirmed!</h1>
                <p class="text-lg text-gray-600">
                    Your meal will be ready in 25 minutes.
                </p>
                
                <button onclick="showPage('menu')" class="mt-10 px-8 py-3 rounded-lg bg-teal-600 text-white font-semibold shadow-md hover:bg-teal-700 transition-all">
                    Order More
                </button>
                <button onclick="getBill()" class="mt-10 px-8 py-3 rounded-lg bg-teal-600 text-white font-semibold shadow-md hover:bg-teal-700 transition-all">
                    Get Bill
                </button>
            </div>
        </div>
        <div id="bill-page" class="page">
            <div class="flex flex-col items-center justify-center h-[90vh] p-6 text-center ">
                <h1 class="text-3xl font-bold text-teal-600 mt-20 mb-4 ">Your Bill Summary:</h1>
                <table class="table-auto border border-gray-300 text-gray-600 text-base w-64 mb-4">
                    <tbody>
                        <tr class="border-b border-gray-300">
                        <td class="px-3 py-2 font-semibold border-r border-gray-300 text-lg">Item</td>
                        <td class="px-3 py-2 font-semibold text-lg">Amount (â‚¹)</td>
                        </tr>
                        <tr class="border-b border-gray-300">
                        <td class="px-3 py-2 border-r border-gray-300 text-lg">Total Bill</td>
                        <td class="px-3 py-2 text-lg"><span class="total-amt"></span></td>
                        </tr>
                        <tr class="border-b border-gray-300">
                        <td class="px-3 py-2 border-r border-gray-300 text-lg">GST (5%)</td>
                        <td class="px-3 py-2 text-lg"><span class="gst-amt"></span></td>
                        </tr>
                        <tr class="border-t border-gray-300 font-semibold">
                        <td class="px-3 py-2 border-r border-gray-300 text-lg">Grand Total</td>
                        <td class="px-3 py-2 text-lg"><span class="grand-total-amt"></span></td>
                        </tr>
                    </tbody>
                </table>

                <p class="text-3xl font-bold text-teal-600 mb-4">Scan to Pay</p>

                <img src="assets/qr.png" class="mb-4">
                <h1 class="text-3xl font-bold text-gray-800 mb-2">Thank You For Visiting!</h1>
                <h1 class="text-3xl font-bold text-gray-800 mb-2">Please Visit Again ðŸ‘‹</h1>

                <button onclick="showPage('menu')" class="mt-10 px-8 py-3 rounded-lg bg-teal-600 text-white font-semibold shadow-md hover:bg-teal-700 transition-all">
                    Done!
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript Logic -->
    <script>
        // --- STATE ---

        // The master list of all available menu items
        const menuItems = [
            { id: 1, name: 'Classic Burger', price: 150, image: 'assets/burger.jpeg' },
            { id: 2, name: 'Veggie Pizza', price: 250, image: 'assets/pizza.jpeg' },
            { id: 3, name: 'Caesar Salad', price: 180, image: 'assets/salad.jpeg' },
            { id: 4, name: 'White Sauce Pasta', price: 220, image: 'assets/pasta.webp' },
            { id: 5, name: 'Paneer Butter Masala', price: 280, image: 'assets/paneer.jpg' },
            { id: 6, name: 'Veg Fried Rice', price: 320, image: 'assets/rice.webp' },
            { id: 7, name: 'Butter Naan', price: 75, image: 'assets/naan.jpeg' },
            { id: 8, name: 'Vanilla Ice Cream', price: 80, image: 'assets/vanilla.jpeg' },
            { id: 9, name: 'Chocolate Brownie', price: 120, image: 'assets/choc.jpeg' }
        ];

        // The cart object, stores quantity by item ID
        let cart = {};

        // --- CORE FUNCTIONS ---

        /**
         * Initializes the app when the page loads
         */
        document.addEventListener('DOMContentLoaded', () => {
            initializeCart();
            renderMenu();
            updateCartSummary();
            showPage('menu'); // Show the menu page by default
        });

        /**
         * Sets up the cart with 0 quantity for all menu items
         */
        function initializeCart() {
            cart = menuItems.reduce((acc, item) => {
                acc[item.id] = 0; // Initialize quantity for each item ID
                return acc;
            }, {});
        }

        /**
         * Resets the cart to all zeros
         */
        function resetCart() {
            Object.keys(cart).forEach(key => {
                cart[key] = 0;
            });
        }

        /**
         * Handles showing and hiding pages
         * @param {string} pageId - The ID of the page to show ('menu', 'checkout', 'success')
         */
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });

            // Show the target page
            const pageToShow = document.getElementById(`${pageId}-page`);
            if (pageToShow) {
                pageToShow.classList.add('active');
            }

            // Run page-specific logic
            if (pageId === 'checkout') {
                renderCheckout();
            }
        }

        /**
         * Places the order, resets the cart, and shows the success page
         */
        function placeOrder() {
            // In a real app, this would send data to a server
            
            showPage('success');
            console.log(cart);
            // Reset cart and update UI for the next order
            resetCart();
            renderMenu();
            updateCartSummary();
        }

        function getBill(){
            showPage('bill');
            const amt=JSON.parse(localStorage.getItem('total'));
            const amtId=document.getElementsByClassName("total-amt")[0];
            const gstId=document.getElementsByClassName("gst-amt")[0];
            const totalId=document.getElementsByClassName("grand-total-amt")[0];
            
            amtId.innerHTML=`â‚¹ ${amt}`;
            gstId.innerHTML=`â‚¹ ${amt*0.05}`;
            totalId.innerHTML=`â‚¹ ${amt*1.05}`;
        }
        // --- RENDER FUNCTIONS (Updating the UI) ---

        /**
         * Renders the entire list of menu items on the menu page
         */
        function renderMenu() {
            const container = document.getElementById('menu-items-container');
            container.innerHTML = ''; // Clear existing items

            menuItems.forEach(item => {
                const quantity = cart[item.id];
                const itemEl = document.createElement('div');
                // Updated styling for menu item cards
                itemEl.className = 'flex items-center justify-between p-4 bg-white rounded-xl shadow-md border border-gray-100';

                // Item Info (Image, Name, Price)
                const infoHtml = `
                    <div class="flex items-center space-x-4 mr-2">
                        <img src="${item.image}" alt="${item.name}" class="w-20 h-20 rounded-lg object-cover">
                        <div>
                            <div class="font-semibold text-lg text-gray-900">${item.name}</div>
                            <div class="text-gray-600 font-medium">â‚¹${item.price}</div>
                        </div>
                    </div>
                `;

                // Quantity Control (Add button or +/- controls)
                let controlHtml;
                if (quantity === 0) {
                    // Show 'Add' button
                    controlHtml = `
                        <button onclick="handleQuantityChange(${item.id}, 1)" class="add-btn">
                            Add
                        </button>
                    `;
                } else {
                    // Show '- 1 +' controls
                    controlHtml = `
                        <div class="flex items-center space-x-3">
                            <button onclick="handleQuantityChange(${item.id}, -1)" class="qty-btn-minus">-</button>
                            <span class="font-bold w-6 text-center text-lg">${quantity}</span>
                            <button onclick="handleQuantityChange(${item.id}, 1)" class="qty-btn">+</button>
                        </div>
                    `;
                }

                itemEl.innerHTML = `${infoHtml}${controlHtml}`;
                container.appendChild(itemEl);
            });
        }

        /**
         * Renders the list of items in the cart on the checkout page
         */
        function renderCheckout() {
            const listContainer = document.getElementById('checkout-items-list');
            const totalEl = document.getElementById('checkout-total-price');
            let total = 0;

            listContainer.innerHTML = ''; // Clear list
            menuItems.forEach(item => {
                const quantity = cart[item.id];
                if (quantity > 0) {
                    // Only show items that are in the cart
                    const itemTotal = item.price * quantity;
                    total += itemTotal;
                    localStorage.setItem('total',JSON.stringify(total));
                    const itemEl = document.createElement('div');
                    itemEl.className = 'flex justify-between items-center py-2';
                    itemEl.innerHTML = `
                        <div class="flex items-center space-x-3">
                             <img src="${item.image}" alt="${item.name}" class="w-12 h-12 rounded-lg object-cover">
                             <div>
                                <div class="font-semibold text-gray-800">${item.name}</div>
                                <div class="text-sm text-gray-500">â‚¹${item.price} x ${quantity}</div>
                             </div>
                        </div>
                        <div class="font-semibold text-gray-800">â‚¹${itemTotal}</div>
                    `;
                    listContainer.appendChild(itemEl);
                }
            });

            // Update total price
            totalEl.textContent = `â‚¹${total}`;
        }

        /**
         * Updates the cart summary bar (item count and total price)
         */
        function fnslert(){
            alert("This is demo");
        }
        function updateCartSummary() {
            const countEl = document.getElementById('cart-item-count');
            const priceEl = document.getElementById('cart-total-price');
            const continueBtn = document.getElementById('continue-btn');

            let totalItems = 0;
            let totalPrice = 0;

            menuItems.forEach(item => {
                const quantity = cart[item.id];
                if (quantity > 0) {
                    totalItems += quantity;
                    totalPrice += item.price * quantity;
                }
            });

            countEl.textContent = `${totalItems} ${totalItems === 1 ? 'Item' : 'Items'}`;
            priceEl.textContent = `â‚¹${totalPrice}`;

            // Enable or disable the 'Continue' button
            // The `disabled:` styles in the button's class list handle the visual change
            if (totalItems > 0) {
                continueBtn.disabled = false;
            } else {
                continueBtn.disabled = true;
            }
        }


        // --- EVENT HANDLERS ---

        /**
         * Handles clicks on the '+' or '-' buttons
         * @param {number} itemId - The ID of the item to change
         * @param {number} change - The amount to change by (e.g., 1 or -1)
         */
        function handleQuantityChange(itemId, change) {
            const currentQuantity = cart[itemId];
            const newQuantity = currentQuantity + change;

            // Ensure quantity doesn't go below 0
            cart[itemId] = Math.max(0, newQuantity);

            // Re-render the menu and update the summary
            renderMenu();
            updateCartSummary();
        }

    </script>

</body>
</html>
